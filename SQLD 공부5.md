# SQLD 공부

## 2,과목 SQL 기본 및 활용 (SQL 기본)

#### 1. WHERE 절

+ **WHERE 절 이란?**
  
  + 사용자가 원하는 자료만을 검색하여 출력하기 위한 조건절<br>`SELECT * FROM 테이블명 WHERE 절;`

+ **연산자의 종류**
  
  - 비교 연산자
    
    | 비교 연산자 | 설명           |
    | ------ | ------------ |
    | =      | 같은 것을 조회     |
    | >      | 큰 것을 조회      |
    | >=     | 크거나 같은 것을 조회 |
    | <      | 작은 것을 조회     |
    | <=     | 작거나 같은 것을 조회 |
  
  - 부정 비교 연산자
    
    | 부정 비교 연산자 | 설명          |
    | --------- | ----------- |
    | !=        | 같지 않은 것을 조회 |
    | ^=        | 같지 않은 것을 조회 |
    | <>        | 같지 않은 것을 조회 |
    | NOT 컬럼명 = | 같지 않은 것을 조회 |
    | NOT 컬럼명 > | 크지 않은 것을 조회 |
  
  - 논리 연산자
    
    | 논리 연산자 | 설명                   |
    | ------ | -------------------- |
    | AND    | 두 개의 조건이 모두 참일 때 참   |
    | OR     | 두 개의 조건 중 하나만 만족해도 참 |
    | NOT    | 조건식의 결과를 부정          |
  
  - SQL 연산자
    
    | SQL 연산자         | 설명                       |
    | --------------- | ------------------------ |
    | LIKE'비교문자열'     | 비교문자열과 형태 일치(%, _ 사용)    |
    | BETWEEN A AND B | A와 B 값 사이의 값 조회(A, B 포함) |
    | IN(list)        | list 값 중 하나라도 일치하면 조회    |
    | IS NULL         | NULL 값 조회                |
  
  - 부정 SQL 연산자
    
    | 부정 SQL 연산자          | 설명                            |
    | ------------------- | ----------------------------- |
    | NOT BETWEEN A AND B | A와 B 사이 있지 않은 값 조회(A,B 값 미포함) |
    | NOT IN(list)        | list 값에 속하지 않는 값 조회           |
    | IS NOT NULL         | NULL 값이 아닌 것 조회               |
  
  - LIKE 연산자
    
    | 와일드카드 | 설명        |
    | ----- | --------- |
    | %     | 0개 이상의 문자 |
    | _     | 1개 이상의 문자 |
  
  - 연산자의 우선순위
    
    + 괄호() -> NOT 연산자 -> 비교/SQL비교 연산자 -> AND -> OR

#### 2. 함수

+ **함수의 분류**
  
  | 분류        | 종류                                                                                                                                                                                                                      |
  | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | 내장함수      | + 단일행 함수<br>    - 함수 입력값이 단일행 값<br>     - 문자형, 숫자형, 날짜형, 형변환, NULL 관련함수<br>     - SELECT, WHERE, ORDER BY 절에 사용 <br>+ 다중행 함수 <br>     - 함수 입력 값이 여러 행의 값<br>     - 여러 개의 값이 입력되어도 하나의 값만 출력<br>     - 집계함수, 그룹함수, 윈도우함수 |
  | 사용자 정의 함수 | 사용자가 작성하는 함수                                                                                                                                                                                                            |

+ **단일행 함수**
  
  | 분류         | 설명                  | 함수                                                                                        |
  | ---------- | ------------------- | ----------------------------------------------------------------------------------------- |
  | 문자형 함수     | 문자를 연산하는 함수         | LOWER, UPPER, INITCAP, ASCII, CHR, CONCAT, SUBSTR, LENGTH, LTRIM, RTRIM, TRIM, LPAD, RPAD |
  | 숫자형 함수     | 숫자를 연산하는 함수         | ABS, SIGN, MOD, FLOOR, ROUND, TRUNC, SIN, COS, TAN, SQRT, EXP                             |
  | 날짜형 함수     | DATE 타입의 값을 연산하는 함수 | SYSDATE, EXTRACT, YEAR\|MONTH\|DAY                                                        |
  | 형변환 함수     | 데이터 타입을 변환하는 함수     | TO_NUMBER, TO_CHAR, TO_DATE                                                               |
  | NULL 관련 함수 | NULL을 처리하는 함수       | NVL(ISNULL), NVL2, NULLIF, COALESCE                                                       |

+ 문자형 함수
  
  | 함수                         | 설명                                         |
  | -------------------------- | ------------------------------------------ |
  | LOWER(문자열) / UPPER(문자열)    | 소문자 / 대문자로 변환                              |
  | ASCII(문자)  / CHR(ASCII 번호) | ASCII값 / 문자 값으로 변환                         |
  | CONCAT(문자열1, 문자열2)         | 문자열 2개 연결                                  |
  | SUBSTR(문자열, m(, n))        | -문자열의 m번째 위치에서 n개의 문자                      |
  | <br>-n이 생략되면 m번째부터 마지막까지   |                                            |
  | LENGTH(문자열)                | 문자열의 길이 계산(공백 포함)                          |
  | LTRIM(문자열, 지정문자)           | -문자열의 왼쪽부터 지정문자까지 제거.<br>-지정문자 생략 시 공백 제거  |
  | RTRIM(문자열, 지정문자)           | -문자열의 오른쪽부터 지정문자까지 제거.<br>-지정문자 생략 시 공백 제거 |
  | TRIM(문자열, 지정문자)            | -왼쪽 및 오른쪽에서 지정문자까지 제거<br>-지정문자 생략 시 공백 제거  |

+ 숫자형 함수
  
  | 함수              | 설명                                                                                                  |
  | --------------- | --------------------------------------------------------------------------------------------------- |
  | ABS(숫자)         | 숫자의 절대값을 반환                                                                                         |
  | SIGN(숫자)        | 숫자가 양수이면 1, 음수이면 -1, 0이면 0을 반환                                                                      |
  | MOD(숫자1, 숫자2)   | 숫자1/숫자2의 나머지 값을 반환                                                                                  |
  | FLOOR(숫자)       | 숫자의 소수점을 버린 값을 반환                                                                                   |
  | CEIL(숫자)        | 숫자의 소수점을 올림 값을 반환                                                                                   |
  | ROUND(숫자,<자리수>) | 숫자를 자리수 +1자리에서 반올림.<br>ex)ROUND(11.986, 2) -> 11.99 / ROUND(11.986) -> 12 / ROUND(11.986, -1) -> 10 |
  | TRUNC(숫자,<자리수>) | 숫자를 자리수 +1 자리에서 버림.                                                                                 |

+ 날짜형 함수
  
  | 함수           | 설명            |
  | ------------ | ------------- |
  | SYSDATE      | 오늘 날짜와 시간을 반환 |
  | EXTRACT(YEAR | MONTH         |

+ 형변환 함수
  
  | 함수               | 설명                         |
  | ---------------- | -------------------------- |
  | TO_NUMBER(문자열)   | 문자열을 숫자로 변환                |
  | TO_CHAR(숫자)      | 숫자를 문자열로 변환                |
  | TO_CHAR(날짜, 형식)  | 날짜를 주어진 형식에 맞는 문자열로 변환     |
  | TO_DATE(문자열, 형식) | 문자열을 주어진 형식에 맞는 날짜 형식으로 변환 |

+ NULL 관련 함수
  
  | 함수                                   | 설명                                          |
  | ------------------------------------ | ------------------------------------------- |
  | NVL(표현식1, 표현식2) / ISNULL(표현식1, 표현식2) | 표현식1이 NULL이 아니면 표현식1, NULL이면 표현식2 반환        |
  | NVL2(표현식1, 표현식2, 표현식3)               | 표현식1이 NULL이 아니면 표현식2, NULL이면 표현식3 반환        |
  | NULLIF(표현식1, 표현식2)                   | 표현식1이 표현식2와 같으면 NULL, 다르면 표현식1 반환           |
  | COALESCE(표현식1, 표현식2, ...)            | NULL이 아닌 최초의 표현식 반환, 모든 표현식이 NULL이면 NULL 반환 |

+ CASE 함수
  
  ```sql
  SELECT LOC,
      CASE LOC
          WHEN 'NEW YORK' THEN 'EAST'
          WHEN 'BOSTON' THEN 'EAST'
          WHEN 'CHICAGO' THEN 'CENTER'
          WHEN 'DALLAS' THEN 'CENTER'
          ELSE 'ETC'
      END AS AREA
  FROM DEPT;
  ```

        -> DEPT 테이블에서 부서지역을 미국의 동부, 중부, 서부로 구분<br>

```sql
SELECT ENAME, SAL,
    CASE
        WHEN SAL >= 2000 THEN 1000
        ELSE (CASE
                WHEN SAL >= 1000 THEN 500
                ELSE 0
              END)
    END AS BONUS
FROM EMP;
```

        -> EMP에서 급여가 2000이상이면 보너스 1000, 1000이상이면 500, 그 외에 0.<br>

```sql
SELECT ENAME, DEPTNO,
    DECODE(DEPTNO, 10, '인사과', 20, '개발부', 
            30, '경영지원팀', 40, '생산부')
    AS DEPT
FROM EMP;
```

        -> EMP 테이블에서 DEPTNO가 10이면 인사과, 20이면 개발부, 30이면 경영지원팀, 40이면 생산부 분류<br>






