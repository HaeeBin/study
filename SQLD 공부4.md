# SQLD 공부

## 2,과목 SQL 기본 및 활용 (SQL 기본)

#### 1. 관계형 데이터베이스 개요

+ **데이터베이스**
  
  + 특정 기업이나 조직, 개인이 필요에 따라 데이터를 일정한 형태로 저장해놓은 것을 의미.
  
  + DBMS 종류에는 Oracle, MS-SQL, MySQL, Syase 등이 있다.



+ **데이터베이스 종류**
  
  | 종류    | 설명                                                                                 |
  | ----- | ---------------------------------------------------------------------------------- |
  | 계층형   | -트리 형태의 자료구조에 데이터 저장, 관리<br>-1:M 관계 표현                                             |
  | 네트워크형 | -오너와 멤버 형태로 데이터 저장<br>-1:M, M:M 표현 가능                                              |
  | 관계형   | -릴레이션에 데이터 저장, 관리<br>-집합 연산과 관계 연산 가능                                              |
  | NoSQL | -Not Only SQL(SQL이 필요 없다는 의미가 아니고, 개선/보안의 의미)<br>-키와 값 형태로 저장, 키를 사용하여 데이터 관리 및 접근 |



+ **SQL(Structured Query Language)**
  
  + SQL은 관계형 데이터베이스에서 데이터 정의 ,데이터 조작, 데이터 제어를 하기 위해 사용하는 언어
  
  + SQL 문장 종류
    
    | 종류                                              | 명령어                                           | 설명                                                                               |
    | ----------------------------------------------- | --------------------------------------------- | -------------------------------------------------------------------------------- |
    | 데이터 정의어<br>(DDL: Data Definition Language)      | CREATE<br>DROP<br>RENAME<br>ALTER<br>TRUNCATE | -테이블과 같은 데이터 구조를 정의하는 데 사용되는 명령어<br>-구조를 생성, 변경, 삭제, 이름을 바꾸는 **데이터 구조**와 관련된 명령어 |
    | 데이터 조작어<br>(DML: Data Manipulation Language)    | SELECT<br>INSERT<br>DELETE<br>UPDATE          | -데이터베이스에 들어있는 데이터를 조회하거나 검색하기 위한 명령어<br>-**데이터**를 추가, 삭제, 수정하기 위한 명령어            |
    | 데이터 제어어<br>(DCL: Data Control Language)         | GRANT<br>REVOKE                               | -데이터베이스에 접근하고 객체들을 사용하도록 권한을 주고 회수하는 명령어                                         |
    | 트랜잭션 제어어<br>(TCL: Transaction Control Language) | COMMIT<br>ROLLBACK<br>SAVEPOINT               | -트랜잭션 별로 제어하는 명령어                                                                |



#### 2.DDL(Data Definition Language)

+ **DDL 종류**
  
  | 명령어      | 설명                             |
  | -------- | ------------------------------ |
  | CREATE   | 데이터베이스의 객체 생성                  |
  | ALTER    | 생성된 객체의 구조 변경                  |
  | DROP     | 객체 삭제                          |
  | TRUNCATE | 테이블의 모든 행 삭제, 테이블 초기화, 저장공간 반납 |



+ **DDL의 대상**
  
  | 대상    | 설명                           |
  | ----- | ---------------------------- |
  | TABLE | 행과 열과 구성된 데이터를 저장하는 기본 저장 단위 |
  | VIEW  | 테이블로부터 유도된 가상의 테이블           |
  | INDEX | 데이터베이스에서 검색속도 향상             |



+ **데이터의 유형**
  
  | 유형           | 설명                                                                                   |
  | ------------ | ------------------------------------------------------------------------------------ |
  | CHAR(n)      | -고정길이 문자열 데이터<br>-기본 길이는 1바이트, n바이트의 길이로 정의<br>-문자열의 길이가 n보다 작으면 나머지 길이만큼 빈공간으로 채워짐. |
  | VARCHAR2(n)  | -기본 길이는 1바이트, n바이트의 길이로 정의<br>-가변 길이로 조정되기 때문에 할당된 변수 값의 바이트만 적용                     |
  | NUMBER(n, m) | -n길이의 숫자에 m길이 만큼의  소수점 자리<br>-m생략 시 정수 의미                                            |
  | DATE         | -ORACLE은 1초 단위, SERVER은 3.33ms로 단위 관리                                                |



+ **CREATE TABLE**
  
  ```sql
  CREATE TABLE 테이블명(
      <컬럼명> <데이터 유형> <제약조건>,
      <컬럼명> <데이터 유형> <제약조건>,
      CONSTRAINT 기본키명 PRIMARY KEY(컬럼명),
      CONSTRAINT 고유키명 UNIQUE KEY(컬럼명),
      CONSTRAINT 외래키명 UNIQUE KEY(컬럼명)
                 REFERENCES 참조테이블(참조테이블 기본키명)
                 ON DELETE CASCADE
  );
  ```



  - TABLE 생성 시 주의
  
    + 알파벳 대/소문자 사용
  
    + 숫자, 특수기호( _, $, # ) 가능
  
    + 첫글자는 반드시 문자



  - 제약조건
  
  | 종류                   | 설명                                                                                                                                          |
  | -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
  | 기본키<br>(PRIMARY KEY) | -기본키를 지정할 때 옆에 PRIMARY KEY 입력<br>-하나의 테이블에 하나의 기본키 제약만 가능<br>-단일 컬럼, 여러 개의 컬럼으로 구성 가능<br>-기본키로 지정된 컬럼은 NULL 불가                              |
  | 고유키<br>(UNIQUE KEY)  | -테이블에 저장된 행 데이터를 고유하게 식별하기 위해 정의<br>-NULL은 고유키 제약X.<br>-NULL 값을 가진 행이 여러 개 있더라도 고유키 제약에 위반되지 않음                                             |
  | 외래키<br>(FOREIGN KEY) | -테이블 간 관계를 정의하기 위해 다른 테이블의 기본키를 외래키로 사용<br>-ON DELETE CASCADE는 참조하고 있는 테이블의 컬럼 데이터가 삭제되면 같은 데이터가 동시 삭제<br>-ON DELETE CASCADE 사용하면 참조 무결성 준수 |
  | CHECK                | 입력할 수 있는 값의 범위 등 제한                                                                                                                         |
  | NOT NULL             | NULL 사용 불가                                                                                                                                  |


  - CREATE TABLE 테이블명1 AS SELECT * FROM 테이블명2;<br>(테이블명2와 같은 내용으로 테이블1이라는 복사 테이블 생성)


+ **ALTER**
  
  | 종류     | 설명  |
  | ------ | --- |
  | ADD    | -테이블에 새로운 컬럼 추가<br>`ALTER TABLE 테이블명 ADD (<컬럼명> <데이터 유형> <제약조건>);`<br>-테이블에 제약조건 추가<br>`ALTER <테이블명> ADD (<제약조건명> <제약조건> <컬럼명>);`   |
  | MODIFY | -컬럼의 데이터 타입 변경<br>`ALTER TABLE <테이블명> MODIFY (<컬럼명> <데이터 유형> <제약조건>);`     |
  | RENAME | -테이블명 변경<br>`ALTER TABLE <테이블명> RENAME TO <변경 후 테이블명>;`<br>-컬럼명 변경<br>`ALTER TABLE <테이블명> RENAME COLUMN <변경 전 컬럼명> TO <변경 후 컬럼명>;`     |
  | DROP   | -테이블의 컬럼 삭제<br>`ALTER TABLE <테이블명> DROP COLUMN <컬럼명>;`<br>-테이블 생성 시 부여했던 제약조건 삭제<br>`ALTER TABLE <테이블명> DROP CONSTRAINT <제약조건명>;`     |

+ **DROP**
  `DROP TABLE <테이블명> (참조관계나 제약조건이 있을 시 추가로 CASCADE CONSTRAINT 넣어야 함)`

+ **TRUNCATE**
  + 테이블은 삭제되지 않지만, 해당 테이블에 있던 모든 행들이 제거되는 명령어.
    `TRUNCATE TABLE <테이블명>;`
 
+ **뷰(VIEW)**
  + 정의만 가지고 있음.
  + 참조한 테이블이 변경되면 VIEW도 변경됨.
  + 숨기고 싶은 정보 제외한 일부 컬럼으로만 정의 가능 -> 보안기능
  + 복잡한 질의를 단순하게 작성
  + 하나의 테이블로 여러 개의 VIEW 만들 수 있음
  + 삽입, 삭제, 수정 제한적.
  + 테이블 구조 변경 불가능
  + 독자적 인덱스 생성 불가능
  `CREATE VIEW <뷰 명> AS SELECT <컬럼명>, <컬럼명>, <컬럼명> .... FROM <테이블 명>;`

#### 3.DML(Data Manipulation Language)

+ **DML 종류**
  | 명령어  | 설명            |
  | ------- | ------------------------|
  | SELECT | 테이블을 구성하는 레코드 중에서 전체 또는 조건을 만족하는 레코드 조회 |
  | INSERT | 테이블에 새로운 레코드 입력 |
  | UPDATE | 테이블에 있는 레코드 중 특정 레코드 내용 변경 |
  | DELETE | 테이블에 있는 레코드 중에서 특정 레코드 삭제 |

+ **SELECT**
  - 테이블의 전체 컬럼 조회
    `SELECT * FROM <테이블명>;`
  - 테이블의 일부 컬럼 조회
    `SELECT <컬럼명> AS <별칭>, <컬럼명> AS <별칭> ... FROM <테이블명>;`

+ **INSERT**
  - 테이블의 전체 컬럼에 데이터 입력
    `INSERT INTO 테이블명 VALUES(입력값1, 입력값2, ...);`
  - 테이블의 일부 컬럼에 데이터 입력
    `INSERT INTO 테이블명(<컬럼명>, <컬럼명>, ...) VALUES(입력값1, 입력값2, ...);`

+ **UPDATE**
  - 해당 컬럼 모든 열의 값이 입력값으로 수정
    `UPDATE 테이블명 SET 컬럼명=입력값;`
  - 해당 컬럼의 조건에 맞는 열의 값이 입력값으로 수정
    `UPDATE 테이블명 SET 컬럼명=입력값 WHERE 조건절;`

+ **DELETE**
  - 테이블의 전체 데이터 삭제
    `DELETE FROM 테이블명;`
  - 테이블의 일부 데이터 삭제
    `DELETE FROM 테이블명 WHERE 조건절;`
  
  


