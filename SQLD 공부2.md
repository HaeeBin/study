# SQLD 공부

## 1과목 데이터 모델링의 이해

#### 2. 엔터티

---------------------------------------------------------

+ **엔터티(Entity)의 개념**
  
  + 업무에서 관리해야하는 데이터들의 집합.
  
  + 인스턴스(Instance)의 집합. 인스턴스는 엔터티의 하나의 값이다.



+ **엔터티(Entity)의 특징**
  
  | 특징        | 설명                                                                                   |
  | --------- | ------------------------------------------------------------------------------------ |
  | 식별여부      | -엔터티는 식별자에 의해서 식별이 가능함.<br>-유일한 식별자(Unique Identifier)가 필수임.                         |
  | 인스턴스들의 집합 | 2개 이상의 인스턴스가 존재해야 함.                                                                 |
  | 속성        | -엔터티는 반드시 속성을 가짐.<br>-하나의 인스턴스는 각각의 속성들에 대한 1개의 속성 값만을 가짐.<br>-각 엔터티는 2개 이상의 속성을 가짐. |
  | 업무        | -업무에서 꼭 필요로 함.<br>-업무 프로세스에 의해 이용되어야 함.                                              |
  | 관계        | 다른 엔터티와 관계가 최소 1개 이상 존재해야 함.                                                         |



+ **유무형에 따른 분류**
  
  | 종류     | 설명                                   |
  | ------ | ------------------------------------ |
  | 유형 엔터티 | 물리적 형태가 있고 지속적으로 활용되는 엔터티            |
  | 개념 엔터티 | 물리적 형태가 없고 관리해야 할 개념적 정보로 구분되는 엔터티   |
  | 사건 엔터티 | 업무를 수행함에 따라 발생되는 엔터티<br>ex) 주문, 미납 등 |
  
  

+ **발생시점에 따른 분류**
  
  | 종류     | 설명                                                                                                         |
  | ------ | ---------------------------------------------------------------------------------------------------------- |
  | 기본 엔터티 | -독립적으로 생성되는 엔터티<br>-다른 엔터티로부터 주식별자를 상속받지 않고 자신의 고유한 주식별자를 가짐.<br>ex)사원, 부서, 상품, 고객 등                       |
  | 중심 엔터티 | -기본 엔터티로부터 발생되고 그 업무에 중심적 역할.<br>-다른 엔터티와의 관계를 통해 행위 엔터티들을 생성.<br>ex)접수, 계약 등                              |
  | 행위 엔터티 | -2개 이상의 부모 엔터티로부터 발생.<br>-비즈니스 프로세스를 실행하면서  생성되는 엔터티<br>-자주 내용이 바뀌거나 추가되어 데이터 양이 가장 많음.<br>ex)주문내역, 계약진행 등 |



+ **엔터티의 명명**
  
  + 현업에서 사용하는 용어 사용
  
  + 약자 사용은 자제
  
  + 단수 명사 사용
  
  + 모든 엔터티에서 유일하게 이름 부여





#### 3.속성

----------------------------------------------------------------------------------------------------------

+ **속성(Attribute)의 개념**
  
  + 업무에서 필요로 하는 인스턴스로 관리하고자 하는 최소 데이터 단위.
  
  + 더 이상 분리되지 않음.



+ **엔터티, 인스턴스, 속성, 속성값 간의 관계**
  
  + 한 개의 엔터티는 2개 이상의 인스턴스의 집합이어야 한다.
  
  + 한 개의 엔터티는 2개 이상의 속성을 가진다.
  
  + 1개의 속성은 1개의 속성값을 가진다.
  
  + 표기법 : IE표기법, Barker표기법



+ **속성(Attribute)의 특징**
  
  + 반드시 해당 업무에서 필요하고 관리하고자 하는 정보.
  
  + 정규화 이론에 근거, 정해진 주식별자에 함수적 종속성을 가짐.
  
  + 1개의 속성은 1개의 값.
  
  + 하나의 속성에 여러 개의 값이 있는 다중값일 경우 별도의 엔터티를 이용하여 분리.



+ **속성(Attribute)의 특성에 따른 분류**
  
  | 종류    | 설명                                            |
  | ----- | --------------------------------------------- |
  | 기본 속성 | 업무로부터 추출한 모든 속성<br>ex) 제품이름, 제조년월, 제조원가       |
  | 설계 속성 | 새로 만들거나 정의하는 속성<br>ex)상품코드, 일련번호              |
  | 파생 속성 | 다른 속성에 의해 만들어지는 속성 (계산된 값 등)<br>ex)합계, 평균, 이자 |



+ **엔터티(Entity) 구성 방식에 따른 분류**
  
  | 종류                      | 설명                              |
  | ----------------------- | ------------------------------- |
  | PK(Primary Key, 기본키) 속성 | 엔터티를 식별할 수 있는 속성                |
  | FK(Foreign Key, 외래키) 속성 | 다른 엔터티와의 관계에서 포함된 속성            |
  | 일반 속성                   | 엔터티에 포함되어 있고, PK/FK에 포함되지 않는 속성 |



+ **분해 여부에 따른 분류**
  
  | 종류     | 설명                                                      |
  | ------ | ------------------------------------------------------- |
  | 단일 속성  | 하나의 의미로 구성<br>ex)이름, 회원ID                               |
  | 복합 속성  | 여러 개의 의미로 구성<br>ex)주소(시, 구, 동 등으로 분해 가능)                |
  | 다중값 속성 | -여러 개의 값을 가질 수 있는 경우<br>-다중값 속성은 엔터티로 분해<br>ex)상품 리스트 등 |



+ **속성(Attribute)의 명명**
  
  + 해당 업무에서 사용하는 이름 부여
  
  + 서술식 속성명 사용하지 않음
  
  + 약어 사용 가급적 하지 않음
  
  + 전체 데이터 모델에서 유일성 확보하는 것이 좋음



+ **도메인(Domain)**
  
  + 각 속성이 가질 수 있는 값의 범위
  
  + 엔터티 내에서 속성에 대한 데이터 타입과 크키, 제약사항을 지정하는 것.
    
    + 제약사항 : 엔터티 내에서 속성에 대한 CHECK 조건 지정
    
    + NOT NULL : 엔터티 내에서 속성에 대한 NOT NULL 지정
    
    + 타입과 크키 : 엔터티 내에서 속성에 대한 데이터 타입과 크기 지정





#### 4. 관계

--------------------------------------------------------------------------------------------------------------------------

+ **관계(Relationship)의 개념**
  
  + 엔터티의 인스턴스 사이의 논리적인 연관성으로 존재의 형태나 행위로서 서로의 연관성이 부여된 상태



+ **관계(Relationship)의 분류**
  
  + ERD : 존재에 의한 관계와 행위에 의한 관계로 분류
  
  + UML(Unified Modeling Language) : 연관관계와 의존관계로 분류



+ **관계(Relationship)의 표기법**
  
  + 관계명(Membership) : 관계의 이름. 엔터티가 관계에 참여하는 형태. 각 관계는 2개의 관계명 및 관점을 가짐.
  
  + 관계차수(Cardinality) : 1:1, 1:M, M:M (두 개의 엔터티 간에 관계에 참여하는 수)
  
  + 관계선택사양(Optionality) : 필수참여(Mandatory), 선택참여(Optional)



+ **관계(Relationship)의 정의 및 읽는 방법**
  
  + 관계 정의
    
    + 업무기술서, 장표에 관계연결에 대한 규칙이 서술되어 있는가?
    
    + 업무기술서, 장표에 관계연결을 가능하게 하는 동사(Verb)가 있는가?
    
    + 두 개의 엔터티 사이에 연관규칙이 존재하는가?
    
    + 두 개의 엔터티 사이에 정보의 조합이 발생하는가?
  
  + 관계 읽기
    
    + 하나의/각각의 -> 기준 엔터티 ->여러/하나의(관계차수) -> 관련 엔터티 -> 항상/때때로 -> 관계명 <br>ex)각각의 사원은 한 부서에 항상 소속된다.



#### 5.식별자

---------------------------------------------------------------------------------------------------------------------

+ 식별자 개념
  
  + 하나의 엔터티에 구성된 여러 개의 속성 중에 엔터티를 대표할 수 있는 속성
  
  + 하나의 엔터티는 반드시 하나의 유일한 식별자가 존재해야 함.



+ 식별자 특징
  
  + 주식별자(기본키, PK)의 특징
    
    | 특징  | 설명                                                               |
    | --- | ---------------------------------------------------------------- |
    | 최소성 | 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 함.                        |
    | 존재성 | 주식별자가 지정되면 반드시 데이터 값이 존재.(NULL 안됨.)<br>ex)사원번호 없는 회사직원은 있을 수 없음. |
    | 유일성 | 주식별자에 의해 엔터티 내에 모든 인스턴스들을 유일하게 구분함.                              |
    | 불변성 | 주식별자가 한 번 특정 엔터티에 지정되면 그 식별자의 값은 변하지 않아야 함.                      |
    
    + 엔터티 내에 각 인스턴스를 유일하게 구분.
    
    + 유일성, 최소성, 불변성, 존재성을 만족해야 함.
    
    + 다른 엔터티와 참조관계를 연결할 수 있는 식별자.
  
  
  
  + 키의 종류
    
    | 데이터베이스 키               | 설명                                                                                           |
    | ---------------------- | -------------------------------------------------------------------------------------------- |
    | 기본 키<br>(Primary Key)  | 후보키 중에서 엔터티를 대표할 수 있는 키                                                                      |
    | 후보키<br>(Candidate Key) | 유일성과 최소성을 만족하는 키                                                                             |
    | 슈퍼키<br>(Super Key)     | 유일성은 만족하지만 최소성을 만족하지 않는 키                                                                    |
    | 대체키<br>(Alternate Key) | 여러 개의 후보키 중에서 기본키를 선정하고 남은 키                                                                 |
    | 외래키<br>(Foreign Key)   | -하나 혹은 다수의 다른 테이블의 기본키 필드를 가리키는 것. 참조무결성을 확인하기 위해 사용되는 키.<br>-허용된 데이터 값만 데이터베이스에 저장하기 위해 사용. |



+ 식별자 분류
  
  + 대표성 여부
    
    | 종류    | 설명                                                                           |
    | ----- | ---------------------------------------------------------------------------- |
    | 주식별자  | -유일성, 최소성, 대표성 만족.<br>-엔터티 내 각 인스턴스를 유일하게 구분할 수 있는 식별자<br>-참조관계 연결할 수 있는 식별자 |
    | 보조식별자 | -엔터티 내 각 인스턴스를 구분.<br>-대표성 만족 못함. 참조관계 연결을 할 수 없는 식별자                        |
  
  + 생성 여부
    
    | 종류    | 설명                       |
    | ----- | ------------------------ |
    | 내부식별자 | 엔터티 내부에서 스스로 만들어지는 식별자   |
    | 외부식별자 | 다른 엔터티와 관계로 인해 만들어지는 식별자 |
  
  + 속성 수
    
    | 종류    | 설명             |
    | ----- | -------------- |
    | 단일식별자 | 하나의 속성으로 구성    |
    | 복합식별자 | 2개 이상의 속성으로 구성 |
  
  + 대체 여부
    
    | 종류    | 설명              |
    | ----- | --------------- |
    | 본질식별자 | 업무에 의해 만들어짐     |
    | 인조식별자 | 인위적으로 만들어지는 식별자 |



+ 주식별자 도출기준
  
  + 해당 업무에서 자주 이용되는 속성
  
  + 이름으로 기술되는 것은 지정하지 않음.
  
  + 너무 많은 속성이 포함되지 않도록 함.



+ 식별자 관계(Identifying Relationship)와 비식별자 관계(Non-Identifying Relationship)
  
  + 외부식별자(Foreign Identifier) : 다른 엔터티와의 관계를 통해 자식 엔터티에 생성되는 속성(Foreign Key역할)
  
  + 식별자 관계
    
    + 부모 엔터티의 주 식별자가 자식 엔터티의 주식별자로 상속되는 경우.
    
    + 강한 관계
  
  + 비식별자 관계
    
    + 부모 엔터티의 주식별자가 자식 엔터티의 주식별자가 아닌 일반 속성으로 상속되는 경우.
    
    + 약한 관계
    
    |               | 식별자 관계                                                | 비식별자 관계                                                   |
    | ------------- | ----------------------------------------------------- | --------------------------------------------------------- |
    | 관계의 강도        | 강한 관계                                                 | 약한 관계                                                     |
    | 자식 주식별자 포함 여부 | 자식의 주식별자에 포함                                          | 자식의 일반 속성에 포함                                             |
    | 표기방법          | 실선 표현                                                 | 점선 표현                                                     |
    | 데이터 모델링시 고려사항 | -자식 엔터티는 부모 엔터티에 종속<br>-상속받은 주식별자의 속성을 다른 엔터티에 이전 필요. | -자식 주식별자를 별도로 구성.<br>-상속받은 주식별자의 속성이 상속되는 것을 차단하기 위해서 고려. |
    | 단점            | -SQL 명령문이 복잡해질 가능성.<br>-오류 가능성이 커질 수 있음.              | 과도한 조인을 유발.(복잡성 증가, 성능 저하)                                |
    
    
